{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { atomic } from \"../react-native-web-fucntions/atomic\";\nimport preprocess from \"../react-native-web-fucntions/preprocess\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport stableHash from 'stable-hash';\nimport hash from \"./hash\";\nimport { useStableMemo } from \"./useStableMemo\";\nimport { getResponsiveStylesImpl, useDimensionsWithEnable } from \"./common\";\nimport { ResponsiveQueryContext } from \"./ResponsiveQueryProvider\";\nimport React from 'react';\nvar textContentMap = {};\nexport var useResponsiveQuery = function useResponsiveQuery(queries) {\n  var _queries$disableCSSMe;\n\n  var responsiveQueryContext = React.useContext(ResponsiveQueryContext);\n  var disableCSSMediaQueries = (_queries$disableCSSMe = queries === null || queries === void 0 ? void 0 : queries.disableCSSMediaQueries) !== null && _queries$disableCSSMe !== void 0 ? _queries$disableCSSMe : responsiveQueryContext.disableCSSMediaQueries;\n  var windowWidth = useDimensionsWithEnable({\n    enable: disableCSSMediaQueries\n  }).width;\n  var values = useStableMemo(function () {\n    if (disableCSSMediaQueries) {\n      var _getResponsiveStyles = getResponsiveStylesImpl(windowWidth);\n\n      if (queries) {\n        var _getResponsiveStyles2 = _getResponsiveStyles(queries),\n            styles = _getResponsiveStyles2.styles;\n\n        return {\n          styles: styles,\n          getResponsiveStyles: _getResponsiveStyles\n        };\n      } else {\n        return {\n          getResponsiveStyles: _getResponsiveStyles\n        };\n      }\n    } else {\n      if (queries) {\n        var _getResponsiveStyles3 = getResponsiveStyles(queries),\n            _styles = _getResponsiveStyles3.styles,\n            dataSet = _getResponsiveStyles3.dataSet;\n\n        return {\n          dataSet: dataSet,\n          styles: _styles,\n          getResponsiveStyles: getResponsiveStyles\n        };\n      } else {\n        return {\n          getResponsiveStyles: getResponsiveStyles\n        };\n      }\n    }\n  }, [queries, windowWidth, disableCSSMediaQueries]);\n  return values;\n};\n\nvar getDataAttribute = function getDataAttribute(queryRule) {\n  if (typeof queryRule.minWidth === 'number' && typeof queryRule.maxWidth === 'number') {\n    return \"min-width-\".concat(queryRule.minWidth, \"-max-width-\").concat(queryRule.maxWidth);\n  } else if (typeof queryRule.minWidth === 'number') {\n    return \"min-width-\".concat(queryRule.minWidth);\n  } else if (typeof queryRule.maxWidth === 'number') {\n    return \"max-width-\".concat(queryRule.maxWidth);\n  }\n\n  return undefined;\n};\n\nvar getMediaQueryRule = function getMediaQueryRule(query, newRule) {\n  if (typeof query.minWidth === 'number' && typeof query.maxWidth === 'number') {\n    return \"@media only screen and (min-width: \".concat(query.minWidth, \"px) and (max-width: \").concat(query.maxWidth, \"px) { \").concat(newRule, \" }\");\n  } else if (typeof query.minWidth === 'number') {\n    return \"@media only screen and (min-width: \".concat(query.minWidth, \"px) { \").concat(newRule, \" }\");\n  } else if (typeof query.maxWidth === 'number') {\n    return \"@media only screen and (max-width: \".concat(query.maxWidth, \"px) { \").concat(newRule, \" }\");\n  }\n\n  return undefined;\n};\n\nvar styleSheet;\n\nvar insert = function insert(rule) {\n  if (rule === '') {\n    return;\n  }\n\n  if (typeof window !== 'undefined') {\n    if (!styleSheet) {\n      var styleEl = document.createElement('style');\n      styleEl.type = 'text/css';\n      styleEl.appendChild(document.createTextNode(''));\n      document.head.appendChild(styleEl);\n      styleSheet = styleEl.sheet;\n    }\n\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n};\n\nvar getResponsiveStyles = function getResponsiveStyles(queries) {\n  var queryString = stableHash(queries.query);\n  var queriesHash = hash(queryString);\n  var styles = queries.initial ? [StyleSheet.create({\n    initial: StyleSheet.flatten(queries.initial)\n  }).initial] : undefined;\n  var dataSet = {};\n\n  if (queries.query) {\n    queries.query.forEach(function (queryRule) {\n      var queryHash = queriesHash + hash(stableHash(queryRule));\n      var dataAttribute = getDataAttribute(queryRule);\n\n      if (dataAttribute) {\n        var newIdentifier = \"[data-\".concat(dataAttribute, \"$=\\\"\").concat(queryHash, \"\\\"]\");\n        dataSet[dataAttribute] = queryHash;\n        var mediaRules = '';\n        var flattenQueryStyle = StyleSheet.flatten(queryRule.style);\n        var newStyle = preprocess(flattenQueryStyle);\n\n        var _atomic = atomic(newStyle),\n            _atomic2 = _slicedToArray(_atomic, 2),\n            compiledStyle = _atomic2[0],\n            compiledOrderedRules = _atomic2[1];\n\n        delete compiledStyle.$$css;\n        Object.keys(compiledStyle).forEach(function (key) {\n          var oldIdentifier = compiledStyle[key];\n          compiledOrderedRules.forEach(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                rules = _ref2[0],\n                _order = _ref2[1];\n\n            var newRule = '';\n\n            if (rules[0].includes(oldIdentifier)) {\n              newRule = rules[0].replace('.' + oldIdentifier, newIdentifier);\n            }\n\n            mediaRules += newRule;\n          });\n        });\n\n        if (mediaRules) {\n          var mediaQueryRule = getMediaQueryRule(queryRule, mediaRules);\n          var queryKey = \"/*\".concat(queryHash, \"{}*/\").concat(mediaQueryRule);\n\n          if (!textContentMap[queryKey]) {\n            insert(queryKey);\n            textContentMap[queryKey] = true;\n          }\n        }\n      }\n    });\n  }\n\n  return {\n    styles: styles,\n    dataSet: dataSet\n  };\n};\n\nexport var getStyleElement = function getStyleElement() {\n  return React.createElement(\"style\", {\n    type: \"text/css\",\n    dangerouslySetInnerHTML: {\n      __html: Object.keys(textContentMap).join('')\n    }\n  });\n};","map":{"version":3,"sources":["useResponsiveQuery.web.tsx"],"names":["textContentMap","useResponsiveQuery","queries","responsiveQueryContext","React","disableCSSMediaQueries","windowWidth","enable","values","useStableMemo","getResponsiveStyles","getResponsiveStylesImpl","styles","dataSet","getDataAttribute","queryRule","getMediaQueryRule","query","insert","rule","styleEl","document","styleSheet","queryString","stableHash","queriesHash","hash","initial","StyleSheet","queryHash","dataAttribute","newIdentifier","mediaRules","flattenQueryStyle","newStyle","preprocess","atomic","compiledStyle","Object","key","oldIdentifier","compiledOrderedRules","newRule","rules","mediaQueryRule","queryKey","getStyleElement","__html"],"mappings":"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","sourcesContent":["// import { atomic } from 'react-native-web/dist/exports/StyleSheet/compiler';\nimport { atomic } from '../react-native-web-fucntions/atomic';\nimport preprocess from '../react-native-web-fucntions/preprocess';\nimport type {\n  DataSet,\n  Query,\n  UseResponsiveQueryParams,\n  UseResponsiveQueryReturnType,\n  GetResponsiveStylesParams,\n} from './types';\nimport { StyleSheet } from 'react-native';\n// @ts-ignore\nimport stableHash from 'stable-hash';\nimport hash from './hash';\nimport type { GetResponsiveStylesReturnType } from './types';\nimport { useStableMemo } from './useStableMemo';\nimport { getResponsiveStylesImpl, useDimensionsWithEnable } from './common';\nimport { ResponsiveQueryContext } from './ResponsiveQueryProvider';\nimport React from 'react';\n\n/******************** Implementation after RNW v0.18 ***********************/\n\n/**\n * 1. preprocess:- Handles shadow/text shadow conversion from RN styles to web *                 styles\n *\n * 2. atomic:- it handles prefixing, converting RN specific styles to web styles *             and generating the CSS selector.\n *             Input {marginTop: 10}\n *             Output\n *             compiledStyle : marginTop: \"r-marginTop-156q2ks\"\n *             compiledOrderedRules : \".r-marginTop-156q2ks{margin-top:10px;}\"\n *      a)compiledStyle:- Array it holds identifier/selector with properties\n *      b)compiledOrderedRules:- Array it holds the css rule with selector name\n *      Also from RNW v0.18 handles swapping of ltr styles if enabled by user\n * 3. createSheet:- used to grab sheet which exist already created by rnw. when we *                  call createSheet without id it will return sheet which exist. *                  cause it automatically takes a default ID  which is already in *                  use (created by rnw with default ID) so this return sheet *                  which exist with  ID doesn't create a new sheet.\n *\n * This Implementation is based on asumptions that RNW doesn't change the         * function  or doesn't re-write them. if there is any change in RNW implmentation * it we'll break and needs to be updated.\n *\n */\nlet textContentMap: any = {};\n\nexport const useResponsiveQuery = (\n  queries?: UseResponsiveQueryParams\n): UseResponsiveQueryReturnType => {\n  const responsiveQueryContext = React.useContext(ResponsiveQueryContext);\n  const disableCSSMediaQueries =\n    queries?.disableCSSMediaQueries ??\n    responsiveQueryContext.disableCSSMediaQueries;\n\n  // Only attaches listener if disableCSSMediaQueries is true\n  const windowWidth = useDimensionsWithEnable({\n    enable: disableCSSMediaQueries,\n  }).width;\n\n  const values = useStableMemo(() => {\n    // Use the non-media query responsive styling\n    if (disableCSSMediaQueries) {\n      const getResponsiveStyles = getResponsiveStylesImpl(windowWidth);\n      if (queries) {\n        const { styles } = getResponsiveStyles(queries);\n        return { styles, getResponsiveStyles };\n      } else {\n        return { getResponsiveStyles };\n      }\n    } else {\n      if (queries) {\n        const { styles, dataSet } = getResponsiveStyles(queries);\n        return { dataSet, styles, getResponsiveStyles };\n      } else {\n        return { getResponsiveStyles };\n      }\n    }\n  }, [queries, windowWidth, disableCSSMediaQueries]);\n\n  return values;\n};\n\nconst getDataAttribute = (queryRule: Query) => {\n  if (\n    typeof queryRule.minWidth === 'number' &&\n    typeof queryRule.maxWidth === 'number'\n  ) {\n    return `min-width-${queryRule.minWidth}-max-width-${queryRule.maxWidth}`;\n  } else if (typeof queryRule.minWidth === 'number') {\n    return `min-width-${queryRule.minWidth}`;\n  } else if (typeof queryRule.maxWidth === 'number') {\n    return `max-width-${queryRule.maxWidth}`;\n  }\n\n  return undefined;\n};\n\nconst getMediaQueryRule = (query: Query, newRule: string) => {\n  if (\n    typeof query.minWidth === 'number' &&\n    typeof query.maxWidth === 'number'\n  ) {\n    return `@media only screen and (min-width: ${query.minWidth}px) and (max-width: ${query.maxWidth}px) { ${newRule} }`;\n  } else if (typeof query.minWidth === 'number') {\n    return `@media only screen and (min-width: ${query.minWidth}px) { ${newRule} }`;\n  } else if (typeof query.maxWidth === 'number') {\n    return `@media only screen and (max-width: ${query.maxWidth}px) { ${newRule} }`;\n  }\n  return undefined;\n};\nlet styleSheet: any;\nconst insert = (rule: string) => {\n  if (rule === '') {\n    return;\n  }\n  if (typeof window !== 'undefined') {\n    if (!styleSheet) {\n      const styleEl = document.createElement('style');\n      styleEl.type = 'text/css';\n      styleEl.appendChild(document.createTextNode(''));\n      document.head.appendChild(styleEl);\n      styleSheet = styleEl.sheet;\n    }\n\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n};\nconst getResponsiveStyles = (\n  queries: GetResponsiveStylesParams\n): GetResponsiveStylesReturnType => {\n  const queryString = stableHash(queries.query);\n\n  const queriesHash = hash(queryString);\n\n  const styles = queries.initial\n    ? [\n        StyleSheet.create({ initial: StyleSheet.flatten(queries.initial) })\n          .initial,\n      ]\n    : undefined;\n\n  let dataSet: DataSet = {};\n\n  /**\n   * This function is copied from intergalacticspacehighway/rnw-responsive-ssr\n   */\n\n  if (queries.query) {\n    queries.query.forEach((queryRule) => {\n      const queryHash = queriesHash + hash(stableHash(queryRule));\n      const dataAttribute = getDataAttribute(queryRule);\n\n      if (dataAttribute) {\n        const newIdentifier = `[data-${dataAttribute}$=\"${queryHash}\"]`;\n        dataSet[dataAttribute] = queryHash;\n\n        let mediaRules = '';\n\n        const flattenQueryStyle = StyleSheet.flatten(queryRule.style);\n        const newStyle = preprocess(flattenQueryStyle);\n        const [compiledStyle, compiledOrderedRules] = atomic(newStyle);\n        //@ts-ignore\n        delete compiledStyle.$$css; //removing unnecessary $$css property\n        Object.keys(compiledStyle).forEach((key) => {\n          const oldIdentifier = compiledStyle[key];\n          compiledOrderedRules.forEach(([rules, _order]: any) => {\n            // Rule returned by atomic has css selectors, so we'll replace it with data-attr selector\n\n            let newRule = '';\n            if (rules[0].includes(oldIdentifier)) {\n              newRule = rules[0].replace('.' + oldIdentifier, newIdentifier);\n            }\n            mediaRules += newRule;\n          });\n        });\n        if (mediaRules) {\n          const mediaQueryRule = getMediaQueryRule(queryRule, mediaRules);\n\n          const queryKey = `/*${queryHash}{}*/${mediaQueryRule}`;\n\n          if (!textContentMap[queryKey]) {\n            insert(queryKey);\n            textContentMap[queryKey] = true;\n          }\n        }\n      }\n    });\n  }\n\n  return { styles, dataSet };\n};\n\n/**\n * This function is copied from intergalacticspacehighway/rnw-responsive-ssr\n */\nexport const getStyleElement = () => {\n  return (\n    <style\n      type=\"text/css\"\n      dangerouslySetInnerHTML={{ __html: Object.keys(textContentMap).join('') }}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module"}